<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>Resta Um</title>
</head>
<body>
    <h1>Resta Um</h1>
    <div id="board">
    </div>
    

    <script>
        // 1 = preta, 0 = vazio, 2 = branca
        let layout = [1, 1, 1, 0, 2, 2, 2];
        let selected = null;

        function renderBoard() {
            const board = document.getElementById("board");
            board.innerHTML = "";
            layout.forEach((block, position) => {
                const div = document.createElement("div");
                div.classList.add("block");

                if (block === 1) div.style.backgroundColor = "black";
                else if (block === 0) div.style.backgroundColor = "white";
                else if (block === 2) div.style.backgroundColor = "lightgray";

                if (selected === position) div.classList.add("selected");

                div.addEventListener("click", () => {
                    handleClick(position);
                    console.log("clicou");
                });

                board.appendChild(div);
            });
        }

        function handleClick(pos) {
            if (selected === null && layout[pos] !== 0) {
                selected = pos; // seleciona peça
            } else if (selected !== null) {
                makeMove(selected, pos); // faz movimento
                selected = null; // limpa seleção
            }
            renderBoard();
        }
        function makeMove(from, to) {
            if( layout[to] === 0 && Math.abs(from - to) != 3)  // para posicao vazia e 2 casas
            {
                layout[to] = layout[from];      // mover peça para nova posição
                layout[from] = 0;               // limpar posição original
            }
            function arraysEqual(a, b) {
                if (a.length !== b.length) return false;
                return a.every((val, idx) => val === b[idx]);
            }
            const victoryLayout = [2, 2, 2, 0, 1, 1, 1];
            if (arraysEqual(layout, victoryLayout)) {
                alert("Você venceu!");
            }
                
        
        }

        renderBoard();
    </script>

</body>
</html>